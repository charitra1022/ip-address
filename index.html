<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Your IP address</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>

    <body>
        <div id="main">
            <div id="ip-details"><h1>Your public IP Address details:</h1>
                <table>
                    <tr>
                        <td>IP Address:</td>
                        <td id="ip-address"></td>
                    </tr>

                    <tr>
                        <td>IP Version:</td>
                        <td id="ip-version"></td>
                    </tr>

                    <tr>
                        <td>City: </td>
                        <td id="city"></td>
                    </tr>

                    <tr>
                        <td>Region: </td>
                        <td id="region-name"></td>
                    </tr>

                    <tr>
                        <td>Postal Code: </td>
                        <td id="postal-code"></td>                        
                    </tr>

                    <tr>
                        <td>Country Name: </td></td>
                        <td id="country-name"></td>
                    </tr>

                    <tr>
                        <td>Country Code: </td>
                        <td id="country-code"></td>
                    </tr>

                    <tr>
                        <td>Currency: </td>
                        <td id="currency"></td>
                    </tr>

                    <tr>
                        <td>Internet Service Provider: </td>
                        <td id="isp"></td>
                    </tr>

                    <tr>
                        <td>Latitude: </td>
                        <td id="latitude"></td>
                    </tr>

                    <tr>
                        <td>Longitude: </td>
                        <td id="longitude"></td>                        
                    </tr>

                    <tr>
                        <td>Time Zone: </td>
                        <td id="timezone"></td>
                    </tr>

                    <tr>
                        <td>Date: </td>
                        <td id="date"></td>
                    </tr>

                    <tr>
                        <td>Time: </td>
                        <td id="time"></td>
                    </tr>
                </table>  
            </div>

            <div id="ip-links">
                <p id="ip-add-link"></p>
                <p id="ip-detail-link"></p>
            </div>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

        <script>
            $(document).ready(function(){
                cookieIp = document.cookie.split(' ').join();
                //if (document.cookie) alert(document.cookie)
            });
        </script>

        <script>
            $(document).ready(function(){
                var ipLink = "https://api.ipify.org?format=json"
                $.getJSON(ipLink, function(data){
                    $("#ip-address").html(data.ip)

                    document.cookie = data.ip.toString()

                    /*var ipDetailsLink = "http://ip-api.com/json/"+data.ip+"?fields=12133375"
                    $("#ip-detail-link").html("<a href='"+ipDetailsLink+"'>Check out Raw Details here</a>")
                    $("#ip-add-link").html("<a href='"+ipLink+"'>Check out Raw IP here</a>")
                    
                    $.getJSON(ipDetailsLink, function(data, status){
                        $("#country-name").html(data.country)
                        $("#country-code").html(data.countryCode)

                        $("#region-name").html(data.regionName)
                        
                        $("#postal-code").html(data.zip)
                        $("#city").html(data.city)
                        $("#currency").html(data.currency)
                        $("#isp").html(data.isp)

                    
                        $("#latitude").html(data.lat)
                        $("#longitude").html(data.lon)

                        $("#timezone").html(data.timezone)
                    })

                    var ipDetailsLink = "https://ipapi.co/"+data.ip+"/json/";
                    $("#ip-detail-link").html("<a href='"+ipDetailsLink+"'>Check out Raw Details here</a>")
                    $("#ip-add-link").html("<a href='"+ipLink+"'>Check out Raw IP here</a>")
                    
                    $.getJSON(ipDetailsLink, function(data, status){
                        $("#ip-version").html(data.version)
                        
                        $("#country-name").html(data.country_name)
                        $("#country-code").html(data.country)

                        $("#region-name").html(data.region)
                        
                        $("#postal-code").html(data.postal)
                        $("#city").html(data.city)
                        $("#currency").html(data.currency)
                        $("#isp").html(data.org)
                    
                        $("#latitude").html(data.latitude)
                        $("#longitude").html(data.longitude)

                        $("#timezone").html(data.timezone)
                    })*/

                    var ipDetailsLink = "https://ipinfo.io/?token=ec63c5a229286d"
                    $("#ip-detail-link").html("<a href='"+ipDetailsLink+"'>Check out Raw Details here</a>")
                    $("#ip-add-link").html("<a href='"+ipLink+"'>Check out Raw IP here</a>")
                    
                    $.getJSON(ipDetailsLink, function(data){
                        $("#country-name").html("NA")
                        $("#country-code").html(data.country)

                        $("#region-name").html(data.region)
                        
                        $("#postal-code").html(data.postal)
                        $("#city").html(data.city)
                        $("#currency").html("NA")
                        $("#isp").html(data.org)

                        var loc = data.loc.split(',');

                        $("#latitude").html(loc[0])
                        $("#longitude").html(loc[1])

                        $("#timezone").html(data.timezone)
                    })     
                })           

                var d = new Date($.now())
                var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
                var date = d.getDate() + "-" + months[d.getMonth()] + "-" + d.getFullYear()
                var time = d.toLocaleTimeString()
                $("#date").html(date)
                $("#time").html(time)
            });
        </script>    
    </body>
</html>