<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Your IP address</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    </head>

    <body>
        <div id="main">
            <div id="ip-details"><h1>Your public IP Address details:</h1>
                <table class="table table-striped">
                    <caption>Some details may not be accurate. This depends on your browser privacy, IP Address Servers, VPN, Proxy and other protocols.<br/>
                        This page is static. To load the latest stats, refresh this page.</caption>
                    <tbody>
                        <tr>
                            <th scope="row">IPv4 Address:</th>
                            <td id="ip-address">-</td>
                        </tr>

                        <!--<tr>
                            <th scope="row">IP Version:</th>
                            <td id="ip-version">-</td>
                        </tr>-->

                        <tr>
                            <th scope="row">City: </th>
                            <td id="city">-</td>
                        </tr>

                        <tr>
                            <th scope="row">Region: </th>
                            <td id="region-name">-</td>
                        </tr>

                        <tr>
                            <th scope="row">Postal Code: </th>
                            <td id="postal-code">-</td>                        
                        </tr>

                        <!--<tr>
                            <th scope="row">Country Name: </th></td>
                            <td id="country-name">-</td>
                        </tr>-->

                        <tr>
                            <th scope="row">Country Code: </th>
                            <td id="country-code">-</td>
                        </tr>

                        <!--<tr>
                            <th scope="row">Currency: </th>
                            <td id="currency">-</td>
                        </tr>-->

                        <tr>
                            <th scope="row">ISP: </th>
                            <td id="isp">-</td>
                        </tr>

                        <tr>
                            <th scope="row">Latitude: </th>
                            <td id="latitude">-</td>
                        </tr>

                        <tr>
                            <th scope="row">Longitude: </th>
                            <td id="longitude">-</td>                        
                        </tr>

                        <tr>
                            <th scope="row">Time Zone: </th>
                            <td id="timezone">-</td>
                        </tr>

                        <tr>
                            <th scope="row">Date: </th>
                            <td id="date">-</td>
                        </tr>

                        <tr>
                            <th scope="row">Time: </th>
                            <td id="time">-</td>
                        </tr>
                    </tbody>
                </table>  
            </div>

            <div id="ip-links">
                <p id="ip-add-link"></p>
                <p id="ip-detail-link"></p>
            </div>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

        <script>
            $(document).ready(function(){
                cookieIp = document.cookie.split(' ').join();
                //if (document.cookie) alert(document.cookie)
            });
        </script>

        <script>
            $(document).ready(function(){
                var ipLink = "https://api.ipify.org?format=json"
                $.getJSON(ipLink, function(data){
                    $("#ip-address").html(data.ip)

                    document.cookie = data.ip.toString()

                    /*var ipDetailsLink = "http://ip-api.com/json/"+data.ip+"?fields=12133375"
                    $("#ip-detail-link").html("<a href='"+ipDetailsLink+"'>Check out Raw Details here</a>")
                    $("#ip-add-link").html("<a href='"+ipLink+"'>Check out Raw IP here</a>")
                    
                    $.getJSON(ipDetailsLink, function(data, status){
                        $("#country-name").html(data.country)
                        $("#country-code").html(data.countryCode)

                        $("#region-name").html(data.regionName)
                        
                        $("#postal-code").html(data.zip)
                        $("#city").html(data.city)
                        $("#currency").html(data.currency)
                        $("#isp").html(data.isp)

                    
                        $("#latitude").html(data.lat)
                        $("#longitude").html(data.lon)

                        $("#timezone").html(data.timezone)
                    })

                    var ipDetailsLink = "https://ipapi.co/"+data.ip+"/json/";
                    $("#ip-detail-link").html("<a href='"+ipDetailsLink+"'>Check out Raw Details here</a>")
                    $("#ip-add-link").html("<a href='"+ipLink+"'>Check out Raw IP here</a>")
                    
                    $.getJSON(ipDetailsLink, function(data, status){
                        $("#ip-version").html(data.version)
                        
                        $("#country-name").html(data.country_name)
                        $("#country-code").html(data.country)

                        $("#region-name").html(data.region)
                        
                        $("#postal-code").html(data.postal)
                        $("#city").html(data.city)
                        $("#currency").html(data.currency)
                        $("#isp").html(data.org)
                    
                        $("#latitude").html(data.latitude)
                        $("#longitude").html(data.longitude)

                        $("#timezone").html(data.timezone)
                    })*/

                    var ipDetailsLink = "https://ipinfo.io/?token=ec63c5a229286d"
                    //$("#ip-detail-link").html("<a href='"+ipDetailsLink+"'>Check out Raw Details here</a>")
                    $("#ip-detail-link").html("<a href='http://ip-api.com/json/"+data.ip+"?fields=12133375'>Check out Raw Details here</a>")
                    $("#ip-add-link").html("<a href='"+ipLink+"'>Check out Raw IP here</a>")

                    $.getJSON(ipDetailsLink, function(data){
                        $("#country-code").html(data.country)

                        $("#region-name").html(data.region)
                        
                        $("#postal-code").html(data.postal)
                        $("#city").html(data.city)
                        $("#isp").html(data.org)

                        var loc = data.loc.split(',');

                        $("#latitude").html(loc[0])
                        $("#longitude").html(loc[1])

                        $("#timezone").html(data.timezone)
                    })     
                })           

                var d = new Date($.now())
                var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
                var date = d.getDate() + "-" + months[d.getMonth()] + "-" + d.getFullYear()
                var time = d.toLocaleTimeString()
                $("#date").html(date)
                $("#time").html(time)
            });
        </script>    
    </body>
</html>